webpackJsonp([33,42],{529:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),a=s(r),o=n(8),i=s(o),u=n(36),c=s(u),l=(n(12),n(11)),f=n(6);t.default={data:function(){var e=function(e,t,n){""===t?n(new Error("请选择一个密保问题")):n()},t=function(e,t,n){""===t?n(new Error("请填写密保答案")):n()};return{safeinfo:{bIsAlredyProtect:!0},questionList:null,answerForm:{question:"",answer:""},answerFormRules:{question:[{validator:e,trigger:"change"}],answer:[{validator:t,trigger:"blur"}]}}},mounted:function(){this.initData()},created:function(){},watch:{"$store.state.userInfo":function(e,t){this.initData()}},computed:(0,c.default)({},(0,l.mapState)(["userInfo"])),components:{},methods:(0,c.default)({},(0,l.mapMutations)(["RECORD_USERINFO"]),{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){return!!e&&void t.setanswerQueFunc()})},setanswerQueFunc:function(){var e=this;return(0,i.default)(a.default.mark(function t(){var n,s;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f.setanswerQue)(e.answerForm.question,e.answerForm.answer);case 2:n=t.sent,0==n.code?(s=e,e.$message({message:"密保修改成功！",type:"success",onClose:function(){window.location.reload()}})):e.$message.error(n.msg),console.log(n);case 5:case"end":return t.stop()}},t,e)}))()},initData:function(){var e=this;return(0,i.default)(a.default.mark(function t(){var n,s,r,o;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f.getSafeInfo)();case 2:return n=t.sent,0==n.code&&(e.safeinfo=n.result),t.next=6,(0,f.getSafeQuestion)();case 6:if(s=t.sent,0==s.code){r=[];for(o in s.result)r.push(s.result[o]);e.questionList=r}case 8:case"end":return t.stop()}},t,e)}))()},setNicknameFunc:function(){var e=this;return(0,i.default)(a.default.mark(function t(){var n,s,r;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,setNickname(e.updateNickForm.nickName);case 2:n=t.sent,e.fullscreenLoading=!1,s=e,0==n.code?(r=e.userInfo,r.nickName=e.updateNickForm.nickName,e.RECORD_USERINFO(r),e.$message({message:"恭喜您，昵称修改成功！",type:"success",onClose:function(){}})):e.$message.error(n.msg);case 6:case"end":return t.stop()}},t,e)}))()}})}},841:function(e,t,n){t=e.exports=n(4)(),t.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",file:"answer.vue",sourceRoot:"webpack://"}])},1177:function(e,t,n){var s=n(841);"string"==typeof s&&(s=[[e.id,s,""]]);n(5)(s,{});s.locals&&(e.exports=s.locals)},1274:function(e,t,n){n(1177);var s=n(3)(n(529),n(1331),"data-v-38ea87ef",null);e.exports=s.exports},1331:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"answer"},[e.safeinfo.bIsAlredyProtect?n("div",{staticClass:"isAlredyProtect"},[n("i",{staticClass:"iconfont icon-yes"}),n("span",{},[e._v("密保已经设定")]),e._v(" "),n("p",[e._v("密保问题是: "),n("i",[e._v(e._s(e.safeinfo.protectQuestion))])])]):n("el-form",{ref:"answerForm",staticClass:"answerForm",attrs:{model:e.answerForm,"status-icon":"",rules:e.answerFormRules,"label-width":"150px"}},[n("el-form-item",{attrs:{label:"新密保问题",prop:"question"}},[n("el-select",{attrs:{placeholder:"请选择密保问题"},model:{value:e.answerForm.question,callback:function(t){e.$set(e.answerForm,"question",t)},expression:"answerForm.question"}},e._l(e.questionList,function(e){return n("el-option",{attrs:{label:e,value:e}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"新密保答案",prop:"answer"}},[n("el-input",{model:{value:e.answerForm.answer,callback:function(t){e.$set(e.answerForm,"answer",t)},expression:"answerForm.answer"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"danger"},on:{click:function(t){e.submitForm("answerForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]}}});