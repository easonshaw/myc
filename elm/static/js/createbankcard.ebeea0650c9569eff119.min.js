webpackJsonp([40,42],{520:function(r,a,s){"use strict";function e(r){return r&&r.__esModule?r:{default:r}}Object.defineProperty(a,"__esModule",{value:!0});var t=s(9),n=e(t),d=s(8),c=e(d),i=s(36),o=e(i),l=(s(12),s(11)),f=s(6);a.default={data:function(){return{nickname:null,userBankCardLockStatus:!0,banksList:null,selbank:null,isfirstCard:!0,saveFormStatus:!1,selArea:null,bankcardform:{bankid:null,branchAddress:"",branchName:"",cardUser:"",cardNo:"",recardNo:"",fundsPwd:"",firstCardNo:""},bankcardformerr:{bankidErr:"请选择开户银行",branchAddressErr:"请选择开户地区",branchNameErr:"由1至20个字符或汉字组成。",cardUserErr:"请填写开户人姓名",cardNoErr:"银行卡必须由16~19位数字组成",recardNoErr:"请重复银行卡号",fundsPwdErr:"请输入资金密码",firstCardNoErr:"请输入第一张银行卡卡号"},bankcardformtxt:{bankidErr:"请选择开户银行",branchAddressErr:"请选择开户地区",branchNameErr:"由1至20个字符或汉字组成。",cardUserErr:"请填写开户人姓名",cardNoErr:"银行卡必须由16~19位数字组成",recardNoErr:"请重复银行卡号",fundsPwdErr:"请输入资金密码",firstCardNoErr:"请输入第一张银行卡卡号"}}},mounted:function(){this.checkBankCards(),this.loadBankList()},created:function(){},watch:{selArea:{handler:function(r,a){this.bankcardform.branchAddress=r.join("")},deep:!0}},computed:(0,o.default)({},(0,l.mapState)(["userInfo"])),components:{},methods:{checkBankCards:function(){var r=this;return(0,c.default)(n.default.mark(function a(){var s;return n.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,f.getBankCards)();case 2:s=a.sent,0==s.code&&(r.userBankCardLockStatus=s.result.userBankCardLockStatus,r.isfirstCard=!(s.result.bindBankCardCount>0),s.result.userBankCardLockStatus&&r.$router.push({name:"bankCardList"}));case 4:case"end":return a.stop()}},a,r)}))()},loadBankList:function(){var r=this;return(0,c.default)(n.default.mark(function a(){var s;return n.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,f.getBankList)();case 2:s=a.sent,0==s.code&&(r.banksList=s.result);case 4:case"end":return a.stop()}},a,r)}))()},tableRowClassName:function(r){var a=(r.row,r.rowIndex);return 0===a?"header-row":"body-row"},onBankSaveSubmit:function(){this.nickname=""==this.userInfo.nickName?this.userInfo.userName:this.userInfo.nickName;var r=!0;this.isfirstCard?this.bankcardformerr.firstCardNoErr="":this.bankcardformerr.cardUserErr="";for(var a in this.bankcardformerr)if(this.bankcardformerr.hasOwnProperty(a)&&""!=this.bankcardformerr[a])return void(r=!1);if(r){this.saveFormStatus=!0;for(var a in this.banksList)this.banksList.hasOwnProperty(a)&&this.banksList[a].id==this.bankcardform.bankid&&(this.selbank=this.banksList[a])}},areaSel:function(r){this.bankcardform.branchAddress=r.join("")},checkBankForm:function(){},returnRouter:function(){this.$router.go(-1)},vaildateBankForm:function(r){if("branchName"==r||"all"==r){var a=/^[a-zA-Z\u4E00-\u9FFF]{1,20}$/;a.exec(this.bankcardform.branchName)?this.bankcardformerr.branchNameErr="":this.bankcardformerr.branchNameErr=this.bankcardformtxt.branchNameErr}if("cardUser"==r||"all"==r){var a=/^[a-zA-Z\u4E00-\u9FFF]{1,10}$/;a.exec(this.bankcardform.cardUser)?this.bankcardformerr.cardUserErr="":this.bankcardformerr.cardUserErr=this.bankcardformtxt.cardUserErr}if("cardNo"==r||"all"==r){var a=/^[0-9]{16,19}$/;a.exec(this.bankcardform.cardNo)?this.bankcardformerr.cardNoErr="":this.bankcardformerr.cardNoErr=this.bankcardformtxt.cardNoErr}if("recardNo"==r||"all"==r){var a=/^[0-9]{10,20}$/;a.exec(this.bankcardform.recardNo)&&this.bankcardform.recardNo==this.bankcardform.cardNo?this.bankcardformerr.recardNoErr="":this.bankcardformerr.recardNoErr=this.bankcardformtxt.recardNoErr}if("fundsPwd"!=r&&"all"!=r||(""==this.bankcardform.fundsPwd?this.bankcardformerr.fundsPwdErr=this.bankcardformtxt.fundsPwdErr:this.bankcardformerr.fundsPwdErr=""),"bankid"!=r&&"all"!=r||(null==this.bankcardform.bankid?this.bankcardformerr.bankidErr=this.bankcardformtxt.bankidErr:this.bankcardformerr.bankidErr=""),"selArea"!=r&&"all"!=r||(""==this.bankcardform.branchAddress?this.bankcardformerr.branchAddressErr=this.bankcardformtxt.branchAddressErr:this.bankcardformerr.branchAddressErr=""),"firstCardNo"==r){var a=/^[0-9]{16,19}$/;a.exec(this.bankcardform.firstCardNo)?this.bankcardformerr.firstCardNoErr="":this.bankcardformerr.firstCardNoErr=this.bankcardformtxt.firstCardNoErr}},onBankInfoSaveSubmit:function(){var r=this;return(0,c.default)(n.default.mark(function a(){var s;return n.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,f.addBankCard)(r.bankcardform.bankid,r.bankcardform.branchAddress,r.bankcardform.branchName,r.bankcardform.cardNo,r.bankcardform.cardUser,r.bankcardform.fundsPwd,r.bankcardform.firstCardNo);case 2:s=a.sent,console.log(s),0==s.code?r.$router.push({name:"bankCardList"}):r.$message.error(s.msg);case 5:case"end":return a.stop()}},a,r)}))()}}}},827:function(r,a,s){a=r.exports=s(4)(),a.push([r.id,"","",{version:3,sources:[],names:[],mappings:"",file:"create.vue",sourceRoot:"webpack://"}])},1163:function(r,a,s){var e=s(827);"string"==typeof e&&(e=[[r.id,e,""]]);s(5)(e,{});e.locals&&(r.exports=e.locals)},1265:function(r,a,s){s(1163);var e=s(3)(s(520),s(1317),"data-v-0d10158e",null);r.exports=e.exports},1317:function(r,a){r.exports={render:function(){var r=this,a=r.$createElement,s=r._self._c||a;return s("div",{staticClass:"bankcard"},[s("div",{staticClass:"bankcardsform"},[r.saveFormStatus?s("div",{staticClass:"saveInfo"},[s("div",{staticClass:"formitem"},[s("label"),r._v(" "),s("div",{staticClass:"savevalue"},[s("img",{attrs:{src:r.selbank.logoFilePath}})])]),r._v(" "),s("div",{staticClass:"formitem"},[s("label",[r._v("昵   称：")]),r._v(" "),s("div",{staticClass:"savevalue"},[r._v(r._s(r.nickname))])]),r._v(" "),s("div",{staticClass:"formitem"},[s("label",[r._v("开户银行：")]),r._v(" "),s("div",{staticClass:"savevalue"},[r._v(r._s(r.selbank.name))])]),r._v(" "),s("div",{staticClass:"formitem"},[s("label",[r._v("开户地区：")]),r._v(" "),s("div",{staticClass:"savevalue"},[r._v(r._s(r.bankcardform.branchAddress))])]),r._v(" "),s("div",{staticClass:"formitem"},[s("label",[r._v("支行名称：")]),r._v(" "),s("div",{staticClass:"savevalue"},[r._v(r._s(r.bankcardform.branchName))])]),r._v(" "),r.isfirstCard?s("div",{staticClass:"formitem"},[s("label",[r._v("开户人姓名：")]),r._v(" "),s("div",{staticClass:"savevalue"},[r._v(r._s(r.bankcardform.cardUser))])]):r._e(),r._v(" "),s("div",{staticClass:"formitem"},[s("label",[r._v("银行卡号：")]),r._v(" "),s("div",{staticClass:"savevalue"},[r._v(r._s(r.bankcardform.cardNo))])]),r._v(" "),s("div",{staticClass:"formitem"},[s("label"),r._v(" "),s("div",{staticClass:"savevalue"},[s("el-button",{attrs:{type:"danger"},on:{click:r.onBankInfoSaveSubmit}},[r._v("提   交")]),r._v(" "),s("el-button",{attrs:{type:"info"},on:{click:function(a){r.saveFormStatus=!1}}},[r._v("返   回")])],1)])]):s("el-form",{ref:"bankcardform",attrs:{model:r.bankcardform,"label-width":"80px"}},[s("div",{staticClass:"formitem"},[s("label",[s("span",{staticClass:"red"},[r._v("*")]),r._v("开户行：")]),r._v(" "),s("el-select",{attrs:{change:r.vaildateBankForm("bankid"),size:"",filterable:"",placeholder:"请选择或者搜索关键字"},model:{value:r.bankcardform.bankid,callback:function(a){r.$set(r.bankcardform,"bankid",a)},expression:"bankcardform.bankid"}},r._l(r.banksList,function(r,a,e){return s("el-option",{key:a,attrs:{label:r.name,value:r.id}})})),r._v(" "),s("span",{staticClass:"errTip"},[r._v(r._s(r.bankcardformerr.bankidErr))])],1),r._v(" "),s("div",{staticClass:"formitem"},[s("label",[s("span",{staticClass:"red"},[r._v("*")]),r._v("开户地区：")]),r._v(" "),s("area-cascader",{attrs:{change:r.vaildateBankForm("selArea"),type:"text",level:1},model:{value:r.selArea,callback:function(a){r.selArea=a},expression:"selArea"}}),r._v(" "),s("span",{staticClass:"errTip"},[r._v(r._s(r.bankcardformerr.branchAddressErr))])],1),r._v(" "),s("div",{staticClass:"formitem"},[s("label",[s("span",{staticClass:"red"},[r._v("*")]),r._v("支行名称：")]),r._v(" "),s("el-form-item",{attrs:{label:""}},[s("el-input",{attrs:{blur:r.vaildateBankForm("branchName")},model:{value:r.bankcardform.branchName,callback:function(a){r.$set(r.bankcardform,"branchName",a)},expression:"bankcardform.branchName"}})],1),r._v(" "),s("span",{staticClass:"errTip"},[r._v(r._s(r.bankcardformerr.branchNameErr))])],1),r._v(" "),r.isfirstCard?s("div",{staticClass:"formitem"},[s("label",[s("span",{staticClass:"red"},[r._v("*")]),r._v("开户人姓名：")]),r._v(" "),s("el-form-item",{attrs:{label:""}},[s("el-input",{attrs:{blur:r.vaildateBankForm("cardUser")},model:{value:r.bankcardform.cardUser,callback:function(a){r.$set(r.bankcardform,"cardUser",a)},expression:"bankcardform.cardUser"}})],1),r._v(" "),s("span",{staticClass:"errTip"},[r._v(r._s(r.bankcardformerr.cardUserErr))])],1):r._e(),r._v(" "),s("div",{staticClass:"formitem"},[s("label",[s("span",{staticClass:"red"},[r._v("*")]),r._v("银行卡号：")]),r._v(" "),s("el-form-item",{attrs:{label:""}},[s("el-input",{attrs:{blur:r.vaildateBankForm("cardNo")},model:{value:r.bankcardform.cardNo,callback:function(a){r.$set(r.bankcardform,"cardNo",a)},expression:"bankcardform.cardNo"}})],1),r._v(" "),s("span",{staticClass:"errTip"},[r._v(r._s(r.bankcardformerr.cardNoErr))])],1),r._v(" "),s("div",{staticClass:"formitem"},[s("label",[s("span",{staticClass:"red"},[r._v("*")]),r._v("确认银行卡号：")]),r._v(" "),s("el-form-item",{attrs:{label:""}},[s("el-input",{attrs:{blur:r.vaildateBankForm("recardNo")},model:{value:r.bankcardform.recardNo,callback:function(a){r.$set(r.bankcardform,"recardNo",a)},expression:"bankcardform.recardNo"}})],1),r._v(" "),s("span",{staticClass:"errTip"},[r._v(r._s(r.bankcardformerr.recardNoErr))])],1),r._v(" "),s("div",{staticClass:"formitem"},[s("label",[s("span",{staticClass:"red"},[r._v("*")]),r._v("资金密码：")]),r._v(" "),s("el-form-item",{attrs:{label:""}},[s("el-input",{attrs:{blur:r.vaildateBankForm("fundsPwd")},model:{value:r.bankcardform.fundsPwd,callback:function(a){r.$set(r.bankcardform,"fundsPwd",a)},expression:"bankcardform.fundsPwd"}})],1),r._v(" "),s("span",{staticClass:"errTip"},[r._v(r._s(r.bankcardformerr.fundsPwdErr))])],1),r._v(" "),r.isfirstCard?r._e():s("div",{staticClass:"formitem"},[s("label",[s("span",{staticClass:"red"},[r._v("*")]),r._v("第一张银行卡：")]),r._v(" "),s("el-form-item",{attrs:{label:""}},[s("el-input",{attrs:{blur:r.vaildateBankForm("firstCardNo")},model:{value:r.bankcardform.firstCardNo,callback:function(a){r.$set(r.bankcardform,"firstCardNo",a)},expression:"bankcardform.firstCardNo"}})],1),r._v(" "),s("span",{staticClass:"errTip"},[r._v(r._s(r.bankcardformerr.firstCardNoErr))])],1),r._v(" "),s("div",{staticClass:"formitem"},[s("el-form-item",[s("el-button",{attrs:{type:"danger"},on:{click:r.onBankSaveSubmit}},[r._v("下一步")]),r._v(" "),s("el-button",{attrs:{type:"info"},on:{click:r.returnRouter}},[r._v("返回")])],1)],1)])],1)])},staticRenderFns:[]}}});